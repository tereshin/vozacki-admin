# API Composables Architecture

## üìã –û–±–∑–æ—Ä —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

–î–∞–Ω–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—à–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞** - —É–±—Ä–∞–Ω–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
2. **–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** - —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–¥—Ö–æ–¥—ã –∫ API
3. **–°–ª–∞–±–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## üèóÔ∏è –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### `base/useBaseApi.ts`
–ë–∞–∑–æ–≤–∞—è —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∞—è:
- –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ URL –¥–ª—è API
- –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ Supabase –∑–∞–ø—Ä–æ—Å–æ–≤
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ–∏—Å–∫–∞
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –≤—ã–∑–æ–≤—ã Supabase

#### `mixins/useCrudMixin.ts`
–ú–∏–∫—Å–∏–Ω –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö CRUD –æ–ø–µ—Ä–∞—Ü–∏–π:
- `getItems()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- `getItemsWithSupabase()` - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —á–µ—Ä–µ–∑ Supabase
- `getSingleItem()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏
- `createItem()` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏
- `updateItem()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
- `deleteItem()` - —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏

#### `utils/useApiErrorHandler.ts`
–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫:
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª—É—á–∞–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ PrimeVue)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

#### `config/apiConfig.ts`
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API endpoints –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç

### –¢–∏–ø—ã

#### `types/api.ts`
–ë–∞–∑–æ–≤—ã–µ —Ç–∏–ø—ã –¥–ª—è API:
- `BaseApiParams` - –±–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤
- `EntityParams<T>` - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- `BaseResponse<T>` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π
- `BaseSingleResponse<T>` - –æ—Ç–≤–µ—Ç —Å –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å—å—é
- –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è API

### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
```typescript
export const useCategoriesApi = () => {
  const { authenticatedFetch } = useAuthenticatedFetch()

  const getCategories = async (params?: {
    page?: number;
    per_page?: number;
    search?: string;
    language_id?: string;
  }): Promise<CategoryResponse> => {
    try {
      return await authenticatedFetch('/api/categories', {
        method: 'GET',
        query: params
      })
    } catch (error) {
      console.error('Error fetching categories:', error)
      throw error
    }
  }
  // ... –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã
}
```

### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
```typescript
export const useCategoriesApi = () => {
  const crudMixin = useCrudMixin<
    CategoryResource,
    CategoryRequest,
    CategoryUpdateRequest,
    CategoryResponse,
    SingleCategoryResponse,
    CategoryFilterParams
  >('categories', ['name', 'description'])

  return {
    getCategories: crudMixin.getItems,
    getSingleCategory: crudMixin.getSingleItem,
    createCategory: crudMixin.createItem,
    updateCategory: crudMixin.updateItem,
    deleteCategory: crudMixin.deleteItem
  }
}
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `useCategoriesApi.ts` - –ø–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å CRUD mixin
- ‚úÖ `useTopicsApi.ts` - –ø–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å CRUD mixin  
- ‚úÖ `useArticlesApi.ts` - —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ + —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ EditorJS
- ‚úÖ `useRolesApi.ts` - —É–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ `useAdministratorsApi.ts` - —É–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ `useTestsApi.ts` - —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ + –∫–∞—Å—Ç–æ–º–Ω–∞—è Supabase –ª–æ–≥–∏–∫–∞
- ‚úÖ `useDashboardApi.ts` - —É–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ `useLanguagesApi.ts` - –ø–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å CRUD mixin + –∫–∞—Å—Ç–æ–º–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- ‚úÖ `useQuestionsApi.ts` - –ø–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å CRUD mixin + –∫–∞—Å—Ç–æ–º–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- ‚úÖ `useAnswersApi.ts` - –ø–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å CRUD mixin (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞)
- ‚úÖ `useAuthApi.ts` - —É–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å apiErrorHandler
- ‚úÖ `useExamConfigApi.ts` - –ø–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å CRUD mixin
- ‚úÖ `useContentUidsApi.ts` - –ø–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å CRUD mixin

**–°—Ç–∞—Ç—É—Å: –í—Å–µ 13 API composables —É—Å–ø–µ—à–Ω–æ –æ—Ç—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω—ã! üéâ**

### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `base/useBaseApi.ts`
- ‚úÖ `mixins/useCrudMixin.ts`
- ‚úÖ `utils/useApiErrorHandler.ts`
- ‚úÖ `config/apiConfig.ts`
- ‚úÖ `types/api.ts`

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### 1. DRY –ø—Ä–∏–Ω—Ü–∏–ø
- –£–±—Ä–∞–Ω–æ ~80% –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

### 2. –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ê–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç –≤ IDE
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

### 3. –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ
- –í—Å–µ API –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ

### 4. –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ API
- –ü—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### 5. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ (–≥–æ—Ç–æ–≤–æ –∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é)

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Å—Ç—ã–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
```typescript
const categoriesApi = useCategoriesApi()

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
const categories = await categoriesApi.getCategories({
  page: 1,
  per_page: 10,
  search: '–Ω–∞–∑–≤–∞–Ω–∏–µ',
  filters: {
    language_id: 'sr'
  }
})

// –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
const newCategory = await categoriesApi.createCategory({
  name: '–ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è',
  language_id: 'sr'
})
```

### –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Articles)
```typescript
const articlesApi = useArticlesApi()

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–µ–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–µ–π EditorJS –∫–æ–Ω—Ç–µ–Ω—Ç–∞
const articles = await articlesApi.getArticles({
  filters: {
    language_id: 'sr',
    category_uid: 'some-category'
  }
})
```

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### Toast Error Fix
–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `"No PrimeVue Toast provided!"` –≤ `useApiErrorHandler`:
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getToast()` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è toast
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ PrimeVue –µ—â–µ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
- Graceful degradation - –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –µ—Å–ª–∏ toast –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

## üîÆ –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
2. **Optimistic updates** - –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
3. **Retry logic** - –∞–≤—Ç–æ–ø–æ–≤—Ç–æ—Ä –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–µ—Ç–∏
4. **Request deduplication** - —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
5. **Offline support** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–±–æ—Ç—ã –æ—Ñ—Ñ–ª–∞–π–Ω

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è unit-—Ç–µ—Å—Ç–æ–≤:
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ –º–∏–∫—Å–∏–Ω–∞—Ö
- –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ Supabase –∫–ª–∏–µ–Ω—Ç–∞
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

## üìà –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ API composables:** 13
- **–û—Ç—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–æ:** 13 (100%)
- **–î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤—ã—Ö –±–∞–∑–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤:** 5
- **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–¥–∞:** —Å ~40KB –¥–æ ~15KB (62% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ)
- **–£–ª—É—á—à–µ–Ω–∏–µ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:** 100% API —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- **–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫:** 100% API –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É

## üìù –®–∞–±–ª–æ–Ω –¥–ª—è –Ω–æ–≤—ã—Ö API

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö API composables –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω:

```typescript
import type { YourFilterParams } from '~/types/api'

export const useYourApi = () => {
  const crudMixin = useCrudMixin<
    YourResource,
    YourRequest,
    YourUpdateRequest,
    YourResponse,
    YourSingleResponse,
    YourFilterParams
  >('your-table', ['searchable_field1', 'searchable_field2'])

  // –î–æ–±–∞–≤—å—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—É—é –ª–æ–≥–∏–∫—É –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
  const customMethod = async () => {
    // —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
  }

  return {
    getItems: crudMixin.getItems,
    getSingleItem: crudMixin.getSingleItem,
    createItem: crudMixin.createItem,
    updateItem: crudMixin.updateItem,
    deleteItem: crudMixin.deleteItem,
    customMethod // –µ—Å–ª–∏ –µ—Å—Ç—å
  }
}
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **backend API –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é** —Å JWT —Ç–æ–∫–µ–Ω–∞–º–∏:

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. **Backend Auth API** (`/api/auth/`)
   - `POST /api/auth/login` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - `POST /api/auth/logout` - –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã  
   - `GET /api/auth/me` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

2. **JWT —Ç–æ–∫–µ–Ω—ã**
   - –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –•—Ä–∞–Ω—è—Ç—Å—è –≤ httpOnly cookies –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
   - –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: 24 —á–∞—Å–∞
   - –°–æ–¥–µ—Ä–∂–∞—Ç: id, email, supabase_id, role

3. **useAuthApi composable**
   - `login()` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ backend API
   - `logout()` - –≤—ã—Ö–æ–¥ —á–µ—Ä–µ–∑ backend API
   - `getCurrentUser()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - `getCurrentAdministrator()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### –ü—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:

1. **–õ–æ–≥–∏–Ω**: 
   - Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email/password –Ω–∞ `/api/auth/login`
   - Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á–µ—Ä–µ–∑ Supabase Auth
   - –ü—Ä–∏ —É—Å–ø–µ—Ö–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è JWT —Ç–æ–∫–µ–Ω —Å –¥–∞–Ω–Ω—ã–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
   - –¢–æ–∫–µ–Ω —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ httpOnly cookie

2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**:
   - –í—Å–µ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç JWT —Ç–æ–∫–µ–Ω
   - Middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω –∏–∑ cookies
   - –¢–æ–∫–µ–Ω –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

3. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**:
   - –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∏–∑ JWT payload
   - –ü—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —á–µ—Ä–µ–∑ `requireAuth()` –∏ `requireRole()`

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

- JWT —Ç–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ httpOnly cookies
- –¢–æ–∫–µ–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—á–∏—â–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ logout

### Utilities:

- `useAuthenticatedFetch()` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç Authorization header
- `server/utils/auth.ts` - —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤
- Middleware `auth.ts` - –∑–∞—â–∏—Ç–∞ —Ä–æ—É—Ç–æ–≤ 